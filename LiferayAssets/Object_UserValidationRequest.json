{"enableComments":false,"objectRelationships":[],"enableCategorization":true,"accountEntryRestrictedObjectFieldName":"","objectActions":[{"conditionExpression":"","objectActionExecutorKey":"groovy","errorMessage":{},"active":true,"description":"","label":{"en_US":"Validation"},"externalReferenceCode":"5f338247-9bc6-d1d6-ca94-557cf9919fa8","objectActionTriggerKey":"onAfterAdd","name":"validation","parameters":{"script":"import com.liferay.portal.kernel.service.ServiceContext\nimport com.liferay.ratings.kernel.service.RatingsEntryLocalServiceUtil\nimport com.liferay.portal.kernel.service.ServiceContext;\nimport com.liferay.portal.kernel.util.GetterUtil;\nimport com.liferay.portal.kernel.model.Company;\nimport com.liferay.portal.kernel.model.UserConstants;\nimport com.liferay.portal.kernel.model.User;\nimport com.liferay.portal.kernel.service.CompanyLocalServiceUtil;\nimport com.liferay.portal.kernel.service.ServiceContext;\nimport com.liferay.portal.kernel.service.UserLocalServiceUtil;\nimport com.liferay.portal.kernel.util.LocaleUtil;\nimport com.liferay.portal.kernel.util.PortalUtil;\nimport java.util.Calendar;\nimport java.util.GregorianCalendar;\nimport com.liferay.portal.kernel.util.GetterUtil;\nimport com.liferay.portal.kernel.exception.PortalException\nimport com.liferay.portal.kernel.model.User\nimport com.liferay.portal.kernel.service.UserLocalServiceUtil\n\ndef obj = com.liferay.object.service.ObjectEntryLocalServiceUtil.getObjectEntry(id)\n\n\n\nServiceContext serviceContext  = new ServiceContext();\n\n\nlong groupId = GetterUtil.getLong(obj.groupId);\nlong companyId = GetterUtil.getLong(obj.companyId);\nCompany company = CompanyLocalServiceUtil.getCompany(companyId);\nString portalURL = company.getPortalURL(groupId);\nfinal long creatorUserId = GetterUtil.getLong('20123');\n\nserviceContext.setCompanyId(companyId);\nserviceContext.setUserId(creatorUserId);\nserviceContext.setPortalURL(portalURL);\nserviceContext.setPathMain(PortalUtil.getPathMain());\nserviceContext.setScopeGroupId(groupId);\n\n\ndef findUser(emailAddress,companyId)\n{\n    try {\n\n        User user = UserLocalServiceUtil.getUserByEmailAddress(companyId, emailAddress)\n\n        // Do something with the user object, for example:\n        return 1;\n    } catch (PortalException pe) {\n        // Handle exception\n        pe.printStackTrace()\n        return 0\n    }\n    return 0\n}\n\ndef userId = findUser(email,companyId)\n\ndef values = obj.getValues();\nvalues[\"validationResult\"] = userId;\nobj.setValues(values);\ncom.liferay.object.service.ObjectEntryLocalServiceUtil.updateObjectEntry(creatorUserId,id,values,serviceContext);\n"},"status":{"label_i18n":"Success","code":1,"label":"success"}}],"accountEntryRestricted":false,"externalReferenceCode":"fc34eac9-79b3-22a7-d779-7d474fbf48f8","objectFields":[{"indexed":false,"objectFieldSettings":[],"DBType":"Date","label":{"en_US":"Create Date"},"type":"Date","required":false,"externalReferenceCode":"7ed21f0f-2bab-3dd2-c8eb-cfaca98bdc03","indexedAsKeyword":false,"system":true,"indexedLanguageId":"","name":"createDate","state":false,"businessType":"Date"},{"indexed":false,"objectFieldSettings":[],"DBType":"String","label":{"en_US":"Author"},"type":"String","required":false,"externalReferenceCode":"affc38ad-4a51-df21-76c0-83bc3f904acd","indexedAsKeyword":false,"system":true,"indexedLanguageId":"","name":"creator","state":false,"businessType":"Text"},{"indexed":true,"objectFieldSettings":[],"DBType":"String","label":{"en_US":"email"},"type":"String","required":true,"externalReferenceCode":"9ea96c96-2b43-6e45-1915-b5b0644b77ca","indexedAsKeyword":false,"system":false,"indexedLanguageId":"en_US","name":"email","state":false,"businessType":"Text"},{"indexed":false,"objectFieldSettings":[],"DBType":"String","label":{"en_US":"External Reference Code"},"type":"String","required":false,"externalReferenceCode":"c3ccb8ae-30a1-c096-af8f-2ab108f41b66","indexedAsKeyword":false,"system":true,"indexedLanguageId":"","name":"externalReferenceCode","state":false,"businessType":"Text"},{"indexed":true,"objectFieldSettings":[],"DBType":"Long","label":{"en_US":"ID"},"type":"Long","required":false,"externalReferenceCode":"65933595-be15-ea79-57c7-83976569c583","indexedAsKeyword":true,"system":true,"indexedLanguageId":"","name":"id","state":false,"businessType":"LongInteger"},{"indexed":false,"objectFieldSettings":[],"DBType":"Date","label":{"en_US":"Modified Date"},"type":"Date","required":false,"externalReferenceCode":"eecdaf8b-4be0-fe1f-adee-6a60c6ae0de8","indexedAsKeyword":false,"system":true,"indexedLanguageId":"","name":"modifiedDate","state":false,"businessType":"Date"},{"indexed":false,"objectFieldSettings":[],"DBType":"String","label":{"en_US":"Status"},"type":"String","required":false,"externalReferenceCode":"1aac1632-7f2c-a361-55f0-b5fc62dc863f","indexedAsKeyword":false,"system":true,"indexedLanguageId":"","name":"status","state":false,"businessType":"Text"},{"indexed":true,"objectFieldSettings":[],"DBType":"Integer","label":{"en_US":"ValidationResult"},"type":"Integer","required":false,"externalReferenceCode":"69bc552c-3c52-5d67-3c29-2cb559780a9d","indexedAsKeyword":false,"system":false,"indexedLanguageId":"","name":"validationResult","state":false,"businessType":"Integer"}],"restContextPath":"/o/c/uservalidationrequests","scope":"company","portlet":false,"parameterRequired":false,"enableObjectEntryHistory":false,"titleObjectFieldName":"id","objectValidationRules":[],"active":true,"defaultLanguageId":"en_US","label":{"en_US":"UserValidationRequest"},"panelCategoryKey":"applications_menu.applications.custom.apps","pluralLabel":{"en_US":"UserValidationRequests"},"objectLayouts":[],"system":false,"objectViews":[],"name":"UserValidationRequest","actions":{"permissions":{},"get":{},"update":{},"delete":{}},"status":{"label_i18n":"Approved","code":0,"label":"approved"}}